# Тестовое задание для компании "МЕД-АСК".

Back-end окна проверки страховых полисов

Используемые инструменты:
- Python ver: 3.7.3;
- Django Framework ver: 2.2.6;
- Django Rest Framework ver: 3.10.3;
- Библиотека Dateutil.

Система хранит в локальной базе данных форматы номеров полисов в виде регулярных выражений. Так же для удобства вместе с форматами номеров, хранятся соответсвующие им имена страховых компаний, а так же тип полиса и количество успешных (полис был найден в базе данных страховой компании) и не успешных запросов (полис не был найден в базе страховой компании). 
Локальную базу данных можно посмотреть и изменить  через панель администратора в **/admin**. 
- Login: admin 
- Password: qwert123

Тестовые данные (таблица с данными о страховых полисах и таблица с данными о доступных и недоступных услугах) находятся в папке **medask/tables/** в формате JSON.

Имена файлов:
- Данные  о полисах от страховых компаний: companies_data.json
- Данные об услугах: services.json

*!!! Для корректной работы, в таблице **companies_data.json** имена компаний должны быть написаны строго заглавными буквами !!!*

Для выполнения проверки окна ввода служит приложение **polischeck** по адресу **/api/polischeck/**

При GET запросе можно узнать какой компании из локальной БД соответсвует введенный номер полиса или узнать существует ли, запрашиваемая услуга в БД страховой компании. Для этого в GET запросе нужно передать один из следющих параметров:
- number=1234 12345678 (номер полиса)
- service=МРТ головного мозга (название услуги)

При POST запросе можно получить данные о полисе (номер полиса, дата окончания действия, тип полиса, имя страховой компании, телефонный номер страховой компании, списки услуг(входящие, не входящие в перечень включенных услуг или отсутствующие в базе данных))

Для получения информации в POST запрос необходимо передать следующие параметры:
- company (название страховой компании)
- number (номер полиса)
- polis_type (тип полиса "OMS" или "DMS")
- services (список требуемых услуг)

Пример:
```JSON
{
	"polis_type": "DMS",
	"number": "1234 12345678",
	"company": "СК МЕД-АСКЕР",
	"services": ["Полирование челюсти", "МРТ головного мозга", "Почтистить зубы", "Снятие камней с 1 зуба"]
}
```

Пример JSON файла для передачи в POST запросе находится в папке **/medask/tables/** имя файла: **post_test.json**
Для теста передачи POST и GET запросов использовался **Postman**.

При завершении работы программа выдает JSON файл с требуемыми параметрами:
```JSON
{
    "polis_ltd_sk": "СК МЕД-АСКЕР",
    "polis_ltd_type": "DMS",
    "polis_ltd_id": "1234 12345678",
    "polis_ltd_date_end": "14.08.2020",
    "polis_ltd_tel": "8 (495) 123-45-67",
    "polis_ltd_inservice": [
        "Полирование челюсти",
        "Снятие камней с 1 зуба"
    ],
    "polis_ltd_notservice": [
        "МРТ головного мозга"
    ],
    "polis_ltd_notfoundservice": [
        "Почтистить зубы"
    ]
}
```
Или вернет сообщение об ошибке:
```JSON
{
    "detail": "Not found."
}
```
Пример JSON файла с результатами работы программы находится в папке **/medask/tables/** имя файла: **result.json**
